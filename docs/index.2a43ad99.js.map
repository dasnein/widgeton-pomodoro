{"mappings":"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","sources":["<anon>","src/ts/main.ts","src/ts/controllers/index.ts","src/ts/consts.ts","src/ts/eventBus/index.ts","src/ts/eventBus/eventBus.ts","src/ts/renderer/index.ts","src/ts/store/index.ts","src/ts/store/store.ts","src/ts/utils/storage.ts","src/ts/renderer/controls.ts","src/ts/renderer/footer.ts","src/ts/labels.ts","src/ts/utils/index.ts","src/ts/renderer/header.ts","src/ts/renderer/timer.ts","src/ts/controls/index.ts"],"sourcesContent":["(function () {\nvar $a91a01484b593c8b$export$2fdc5139b636713c;\n(function(StorageKey) {\n    StorageKey[\"Settings\"] = \"settings\";\n    StorageKey[\"State\"] = \"state\";\n})($a91a01484b593c8b$export$2fdc5139b636713c || ($a91a01484b593c8b$export$2fdc5139b636713c = {}));\nvar $a91a01484b593c8b$var$ButtonId;\n(function(ButtonId) {\n    ButtonId[\"Start\"] = \"button-start\";\n    ButtonId[\"Stop\"] = \"button-stop\";\n    ButtonId[\"Settings\"] = \"button-settings\";\n    ButtonId[\"Reset\"] = \"button-reset\";\n})($a91a01484b593c8b$var$ButtonId || ($a91a01484b593c8b$var$ButtonId = {}));\nvar $a91a01484b593c8b$var$TextId;\n(function(TextId) {\n    TextId[\"TimeOperation\"] = \"time-operation\";\n    TextId[\"TimeRemains\"] = \"time-remains\";\n    TextId[\"HeaderRoundCurrent\"] = \"header-round-current\";\n    TextId[\"HeaderRoundsTotal\"] = \"header-rounds-total\";\n})($a91a01484b593c8b$var$TextId || ($a91a01484b593c8b$var$TextId = {}));\nvar $a91a01484b593c8b$var$TimerLogoId;\n(function(TimerLogoId) {\n    TimerLogoId[\"Colored\"] = \"timer-logo-colored\";\n    TimerLogoId[\"Colorless\"] = \"timer-logo-colorless\";\n})($a91a01484b593c8b$var$TimerLogoId || ($a91a01484b593c8b$var$TimerLogoId = {}));\nvar $a91a01484b593c8b$var$AudioId;\n(function(AudioId) {\n    AudioId[\"LongBreak\"] = \"audio-long-break\";\n    AudioId[\"ShortBreak\"] = \"audio-short-break\";\n    AudioId[\"Work\"] = \"audio-work\";\n})($a91a01484b593c8b$var$AudioId || ($a91a01484b593c8b$var$AudioId = {}));\nconst $a91a01484b593c8b$export$93078a41d8e73977 = {\n    START: document.getElementById(\"button-start\"),\n    STOP: document.getElementById(\"button-stop\"),\n    SETTINGS: document.getElementById(\"button-settings\"),\n    RESET: document.getElementById(\"button-reset\")\n};\nconst $a91a01484b593c8b$export$dd1e936c5b2d458 = {\n    TIME_OPERATION: document.getElementById(\"time-operation\"),\n    TIME_REMAINS: document.getElementById(\"time-remains\"),\n    HEADER_ROUND_CURRENT: document.getElementById(\"header-round-current\"),\n    HEADER_ROUNDS_TOTAL: document.getElementById(\"header-rounds-total\")\n};\nconst $a91a01484b593c8b$export$b04ded17071220be = {\n    LOGO_COLORED: document.getElementById(\"timer-logo-colored\"),\n    LOGO_COLORLESS: document.getElementById(\"timer-logo-colorless\")\n};\nconst $a91a01484b593c8b$export$44dfd228af0a5ee2 = {\n    LONG_BREAK: document.getElementById(\"audio-long-break\"),\n    SHORT_BREAK: document.getElementById(\"audio-short-break\"),\n    WORK: document.getElementById(\"audio-work\")\n};\nconst $a91a01484b593c8b$export$2accdc8d96d35d7d = {\n    focusPeriod: 1500000,\n    shortBreakPeriod: 300000,\n    longBreakPeriod: 900000,\n    rounds: 4\n};\nconst $a91a01484b593c8b$export$63ea91826dd1b82b = {\n    round: 0,\n    running: false,\n    breakRunning: false,\n    timeLeft: 1500000\n};\nvar $a91a01484b593c8b$export$a427be93dd43fc51;\n(function(BusEvents) {\n    BusEvents[\"Start\"] = \"start\";\n    BusEvents[\"Stop\"] = \"stop\";\n    BusEvents[\"NextRound\"] = \"next-round\";\n    BusEvents[\"Reset\"] = \"reset\";\n})($a91a01484b593c8b$export$a427be93dd43fc51 || ($a91a01484b593c8b$export$a427be93dd43fc51 = {}));\nvar $a91a01484b593c8b$export$eb0f4a961a9c335e;\n(function(ElementModifier) {\n    ElementModifier[\"Hidden\"] = \"hidden\";\n})($a91a01484b593c8b$export$eb0f4a961a9c335e || ($a91a01484b593c8b$export$eb0f4a961a9c335e = {}));\n\n\nclass $db9724f8cd4502af$var$EventBus {\n    constructor(){\n        this._eventObject = {};\n        this._callbackId = 0;\n    }\n    dispatch(eventName, ...args) {\n        const callbackObject = this._eventObject[eventName];\n        if (!callbackObject) return console.warn(eventName + \" not found!\");\n        for(let id in callbackObject){\n            callbackObject[id](...args);\n            if (id[0] === \"d\") delete callbackObject[id];\n        }\n    }\n    on(eventName, callback) {\n        if (!this._eventObject[eventName]) this._eventObject[eventName] = {};\n        const id = this._callbackId++;\n        this._eventObject[eventName][id] = callback;\n        const unSubscribe = ()=>{\n            delete this._eventObject[eventName][id];\n            if (Object.keys(this._eventObject[eventName]).length === 0) delete this._eventObject[eventName];\n        };\n        return {\n            unSubscribe: unSubscribe\n        };\n    }\n    off(eventName) {\n        if (!eventName) {\n            this._eventObject = {};\n            return;\n        }\n        delete this._eventObject[eventName];\n    }\n}\nconst $db9724f8cd4502af$export$f6644f0f2c90144b = new $db9724f8cd4502af$var$EventBus();\n\n\n\n\n\n\n\nvar $d011249472fddba4$export$2e2bcd8739ae039 = {\n    loadSettings: ()=>JSON.parse(localStorage.getItem((0, $a91a01484b593c8b$export$2fdc5139b636713c).Settings) || \"{}\"),\n    saveSettings: (settings)=>localStorage.setItem((0, $a91a01484b593c8b$export$2fdc5139b636713c).Settings, JSON.stringify(settings)),\n    loadState: ()=>JSON.parse(localStorage.getItem((0, $a91a01484b593c8b$export$2fdc5139b636713c).State) || \"{}\"),\n    saveState: (state)=>localStorage.setItem((0, $a91a01484b593c8b$export$2fdc5139b636713c).State, JSON.stringify(state))\n};\n\n\nclass $b282ec412b377a19$var$Store {\n    constructor(){\n        this._init();\n    }\n    _init() {\n        this._loadSettings();\n        this._loadState();\n    }\n    _loadSettings() {\n        const savedSettings = (0, $d011249472fddba4$export$2e2bcd8739ae039).loadSettings();\n        this._settings = {\n            ...(0, $a91a01484b593c8b$export$2accdc8d96d35d7d),\n            ...savedSettings\n        };\n    }\n    _loadState() {\n        const savedState = (0, $d011249472fddba4$export$2e2bcd8739ae039).loadState();\n        this._state = {\n            ...(0, $a91a01484b593c8b$export$63ea91826dd1b82b),\n            timeLeft: this._settings.focusPeriod,\n            ...savedState\n        };\n    }\n    startTimer() {\n        this._state.running = true;\n        this.state.round = this.state.round || 1;\n        this.reduceTimer();\n    }\n    stopTimer() {\n        this._state.running = false;\n    }\n    reduceTimer() {\n        this.state.round > 0 && (this._state.timeLeft = this._state.timeLeft - 1000);\n        if (this._state.timeLeft < 0) return (0, $db9724f8cd4502af$export$f6644f0f2c90144b).dispatch((0, $a91a01484b593c8b$export$a427be93dd43fc51).NextRound);\n        this._state.running && setTimeout(this.reduceTimer.bind(this), 1000);\n    }\n    resetTimer() {\n        this._init();\n    }\n    restartTimer() {\n        this._loadState();\n        this.startTimer();\n    }\n    startBreak() {\n        this._state.breakRunning = true;\n        this._state.timeLeft = this.state.round === this.settings.rounds ? this.settings.longBreakPeriod : this.settings.shortBreakPeriod;\n        this.reduceTimer();\n    }\n    startNextRound() {\n        this._state.breakRunning = false;\n        this._state.round += 1;\n        this._state.timeLeft = this.settings.focusPeriod;\n        this.reduceTimer();\n    }\n    get settings() {\n        return this._settings;\n    }\n    get state() {\n        return this._state;\n    }\n}\nconst $b282ec412b377a19$export$6f57813fe9f31bf9 = new $b282ec412b377a19$var$Store();\n\n\n\n\n\n\nfunction $406adae1214e3507$export$6d535e4753f6abc4() {\n    if ((0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.running) {\n        (0, $a91a01484b593c8b$export$93078a41d8e73977).START?.classList.add((0, $a91a01484b593c8b$export$eb0f4a961a9c335e).Hidden);\n        (0, $a91a01484b593c8b$export$93078a41d8e73977).STOP?.classList.remove((0, $a91a01484b593c8b$export$eb0f4a961a9c335e).Hidden);\n    } else {\n        (0, $a91a01484b593c8b$export$93078a41d8e73977).START?.classList.remove((0, $a91a01484b593c8b$export$eb0f4a961a9c335e).Hidden);\n        (0, $a91a01484b593c8b$export$93078a41d8e73977).STOP?.classList.add((0, $a91a01484b593c8b$export$eb0f4a961a9c335e).Hidden);\n    }\n}\n\n\n\nconst $c30515efa72e4213$export$79b91d4669dcadcb = {\n    MORE: \"\\u0435\\u0449\\u0451\",\n    RELAX: \"\\u041E\\u0442\\u0434\\u044B\\u0445\\u0430\\u0435\\u043C\",\n    WORK: \"\\u0420\\u0430\\u0431\\u043E\\u0442\\u0430\\u0435\\u043C\"\n};\n\n\n\nconst $f1570614bfa62b3d$export$a098d05678a70394 = (num)=>num.toString().padStart(2, \"0\");\n\n\nfunction $d007cd4e2a5c19fb$export$f78842bd8df93f12() {\n    const currentOperation = (0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.breakRunning ? (0, $c30515efa72e4213$export$79b91d4669dcadcb).RELAX : (0, $c30515efa72e4213$export$79b91d4669dcadcb).WORK;\n    const timeLeftMs = (0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.timeLeft;\n    const timeLeftMinutes = Math.floor(timeLeftMs / 1000 / 60);\n    const timeLeftSeconds = (timeLeftMs - timeLeftMinutes * 60000) / 1000;\n    const timeLeftString = `${(0, $f1570614bfa62b3d$export$a098d05678a70394)(timeLeftMinutes)}:${(0, $f1570614bfa62b3d$export$a098d05678a70394)(timeLeftSeconds)}`;\n    (0, $a91a01484b593c8b$export$dd1e936c5b2d458).TIME_OPERATION && ((0, $a91a01484b593c8b$export$dd1e936c5b2d458).TIME_OPERATION.innerHTML = currentOperation);\n    (0, $a91a01484b593c8b$export$dd1e936c5b2d458).TIME_REMAINS && ((0, $a91a01484b593c8b$export$dd1e936c5b2d458).TIME_REMAINS.innerHTML = timeLeftString);\n}\n\n\n\n\nfunction $1c3db7bee2329d1a$export$31c38b89870eadc8() {\n    (0, $a91a01484b593c8b$export$dd1e936c5b2d458).HEADER_ROUND_CURRENT && ((0, $a91a01484b593c8b$export$dd1e936c5b2d458).HEADER_ROUND_CURRENT.innerHTML = (0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.round.toString());\n    (0, $a91a01484b593c8b$export$dd1e936c5b2d458).HEADER_ROUNDS_TOTAL && ((0, $a91a01484b593c8b$export$dd1e936c5b2d458).HEADER_ROUNDS_TOTAL.innerHTML = (0, $b282ec412b377a19$export$6f57813fe9f31bf9).settings.rounds.toString());\n}\n\n\n\n\nfunction $829e6d5456168f96$export$42603aefdc96a347() {\n    const isLastRound = (0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.round === (0, $b282ec412b377a19$export$6f57813fe9f31bf9).settings.rounds;\n    const totalPeriod = (0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.breakRunning ? isLastRound ? (0, $b282ec412b377a19$export$6f57813fe9f31bf9).settings.longBreakPeriod : (0, $b282ec412b377a19$export$6f57813fe9f31bf9).settings.shortBreakPeriod : (0, $b282ec412b377a19$export$6f57813fe9f31bf9).settings.focusPeriod;\n    const timerPercentage = 100 - Math.floor((0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.timeLeft * 100 / totalPeriod);\n    (0, $a91a01484b593c8b$export$b04ded17071220be).LOGO_COLORED && ((0, $a91a01484b593c8b$export$b04ded17071220be).LOGO_COLORED.style.height = `${timerPercentage}%`);\n}\n\n\nfunction $d35f44120e40e340$export$b3890eb0ae9dca99() {\n    (0, $406adae1214e3507$export$6d535e4753f6abc4)();\n    (0, $d007cd4e2a5c19fb$export$f78842bd8df93f12)();\n    (0, $829e6d5456168f96$export$42603aefdc96a347)();\n    (0, $1c3db7bee2329d1a$export$31c38b89870eadc8)();\n    if ((0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.running) window.requestAnimationFrame($d35f44120e40e340$export$b3890eb0ae9dca99);\n}\n\n\n\nfunction $ce03f9df0e036f20$export$f4d1a3d37947b9f3() {\n    (0, $db9724f8cd4502af$export$f6644f0f2c90144b).on((0, $a91a01484b593c8b$export$a427be93dd43fc51).Start, $ce03f9df0e036f20$var$onStartButton);\n    (0, $db9724f8cd4502af$export$f6644f0f2c90144b).on((0, $a91a01484b593c8b$export$a427be93dd43fc51).Stop, $ce03f9df0e036f20$var$onStopButton);\n    (0, $db9724f8cd4502af$export$f6644f0f2c90144b).on((0, $a91a01484b593c8b$export$a427be93dd43fc51).NextRound, $ce03f9df0e036f20$var$onNextRound);\n    (0, $db9724f8cd4502af$export$f6644f0f2c90144b).on((0, $a91a01484b593c8b$export$a427be93dd43fc51).Reset, $ce03f9df0e036f20$var$onResetButton);\n}\nfunction $ce03f9df0e036f20$var$onStartButton() {\n    (0, $b282ec412b377a19$export$6f57813fe9f31bf9).startTimer();\n    (0, $d35f44120e40e340$export$b3890eb0ae9dca99)();\n}\nfunction $ce03f9df0e036f20$var$onStopButton() {\n    (0, $b282ec412b377a19$export$6f57813fe9f31bf9).stopTimer();\n    (0, $d35f44120e40e340$export$b3890eb0ae9dca99)();\n}\nfunction $ce03f9df0e036f20$var$onNextRound() {\n    if ((0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.round >= (0, $b282ec412b377a19$export$6f57813fe9f31bf9).settings.rounds && (0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.breakRunning) return (0, $b282ec412b377a19$export$6f57813fe9f31bf9).restartTimer();\n    if ((0, $b282ec412b377a19$export$6f57813fe9f31bf9).state.breakRunning) (0, $b282ec412b377a19$export$6f57813fe9f31bf9).startNextRound();\n    else (0, $b282ec412b377a19$export$6f57813fe9f31bf9).startBreak();\n}\nfunction $ce03f9df0e036f20$var$onResetButton() {\n    (0, $b282ec412b377a19$export$6f57813fe9f31bf9).resetTimer();\n    (0, $d35f44120e40e340$export$b3890eb0ae9dca99)();\n}\n\n\n\n\nfunction $6bad78e5e6ff2aa6$var$initStartButton() {\n    (0, $a91a01484b593c8b$export$93078a41d8e73977).START?.addEventListener(\"click\", ()=>{\n        (0, $db9724f8cd4502af$export$f6644f0f2c90144b).dispatch((0, $a91a01484b593c8b$export$a427be93dd43fc51).Start);\n    });\n}\nfunction $6bad78e5e6ff2aa6$var$initStopButton() {\n    (0, $a91a01484b593c8b$export$93078a41d8e73977).STOP?.addEventListener(\"click\", ()=>{\n        (0, $db9724f8cd4502af$export$f6644f0f2c90144b).dispatch((0, $a91a01484b593c8b$export$a427be93dd43fc51).Stop);\n    });\n}\nfunction $6bad78e5e6ff2aa6$var$initResetButton() {\n    (0, $a91a01484b593c8b$export$93078a41d8e73977).RESET?.addEventListener(\"click\", ()=>{\n        (0, $db9724f8cd4502af$export$f6644f0f2c90144b).dispatch((0, $a91a01484b593c8b$export$a427be93dd43fc51).Reset);\n    });\n}\nfunction $6bad78e5e6ff2aa6$export$2e2bcd8739ae039() {\n    $6bad78e5e6ff2aa6$var$initStartButton();\n    $6bad78e5e6ff2aa6$var$initStopButton();\n    $6bad78e5e6ff2aa6$var$initResetButton();\n}\n\n\n\nfunction $c9c33ea82c0377e3$var$init() {\n    (0, $6bad78e5e6ff2aa6$export$2e2bcd8739ae039)();\n    (0, $ce03f9df0e036f20$export$f4d1a3d37947b9f3)();\n    (0, $d35f44120e40e340$export$b3890eb0ae9dca99)();\n}\n(()=>$c9c33ea82c0377e3$var$init())();\n\n})();\n//# sourceMappingURL=index.2a43ad99.js.map\n","import { initControllers } from \"./controllers\";\nimport initControls from \"./controls\";\nimport { render } from \"./renderer\";\nimport { store } from \"./store\";\n\nfunction init() {\n  initControls();\n\n  initControllers();\n\n  render();\n}\n\n(() => init())();\n","import { BusEvents } from \"../consts\";\nimport { eventBus } from \"../eventBus\";\nimport { render } from \"../renderer\";\nimport { store } from \"../store\";\n\nexport function initControllers() {\n  eventBus.on(BusEvents.Start, onStartButton);\n  eventBus.on(BusEvents.Stop, onStopButton);\n  eventBus.on(BusEvents.NextRound, onNextRound);\n  eventBus.on(BusEvents.Reset, onResetButton);\n}\n\nfunction onStartButton() {\n  store.startTimer();\n  render();\n}\n\nfunction onStopButton() {\n  store.stopTimer();\n  render();\n}\n\nfunction onNextRound() {\n  if (store.state.round >= store.settings.rounds && store.state.breakRunning) {\n    return store.restartTimer();\n  }\n\n  if (store.state.breakRunning) {\n    store.startNextRound();\n  } else {\n    store.startBreak();\n  }\n}\n\nfunction onResetButton() {\n  store.resetTimer();\n  render();\n}\n","import { StoreSettings, StoreState } from \"./types\"\n\nexport enum StorageKey {\n  Settings = 'settings',\n  State = 'state',\n}\n\nenum ButtonId {\n  Start = 'button-start',\n  Stop = 'button-stop',\n  Settings = 'button-settings',\n  Reset = 'button-reset',\n}\n\nenum TextId {\n  TimeOperation = 'time-operation',\n  TimeRemains = 'time-remains',\n  HeaderRoundCurrent = 'header-round-current',\n  HeaderRoundsTotal = 'header-rounds-total',\n}\n\nenum TimerLogoId {\n  Colored = 'timer-logo-colored',\n  Colorless = 'timer-logo-colorless',\n}\n\nenum AudioId {\n  LongBreak = 'audio-long-break',\n  ShortBreak = 'audio-short-break',\n  Work = 'audio-work',\n}\n\nexport const EL_BUTTONS = {\n  START: document.getElementById(ButtonId.Start),\n  STOP: document.getElementById(ButtonId.Stop),\n  SETTINGS: document.getElementById(ButtonId.Settings),\n  RESET: document.getElementById(ButtonId.Reset),\n}\n\nexport const EL_TEXTS = {\n  TIME_OPERATION: document.getElementById(TextId.TimeOperation),\n  TIME_REMAINS: document.getElementById(TextId.TimeRemains),\n  HEADER_ROUND_CURRENT: document.getElementById(TextId.HeaderRoundCurrent),\n  HEADER_ROUNDS_TOTAL: document.getElementById(TextId.HeaderRoundsTotal),\n}\n\nexport const EL_TIMER = {\n  LOGO_COLORED: document.getElementById(TimerLogoId.Colored),\n  LOGO_COLORLESS: document.getElementById(TimerLogoId.Colorless),\n}\n\nexport const EL_AUDIO = {\n  LONG_BREAK: document.getElementById(AudioId.LongBreak),\n  SHORT_BREAK: document.getElementById(AudioId.ShortBreak),\n  WORK: document.getElementById(AudioId.Work),\n}\n\nexport const DEFAULT_STORE_SETTINGS: StoreSettings = {\n  focusPeriod: 25 * 60 * 1000,\n  shortBreakPeriod: 5 * 60 * 1000,\n  longBreakPeriod: 15 * 60 * 1000,\n  rounds: 4,\n};\n\nexport const DEFAULT_STORE_STATE: StoreState = {\n  round: 0,\n  running: false,\n  breakRunning: false,\n  timeLeft: 25 * 60 * 1000,\n};\n\nexport enum BusEvents {\n  Start = 'start',\n  Stop = 'stop',\n  NextRound = 'next-round',\n  Reset = 'reset',\n}\n\nexport enum ElementModifier {\n  Hidden = 'hidden',\n}\n","export * from './eventBus';\n","import { IEventBus, IEventObject, ISubscribe } from \"../types\";\n\nclass EventBus implements IEventBus {\n  private _eventObject: IEventObject;\n  private _callbackId: number;\n  \n  constructor() {\n    this._eventObject = {};\n    this._callbackId = 0;\n  }\n\n  dispatch<T extends any[]>(eventName: string, ...args: T): void {\n    const callbackObject = this._eventObject[eventName];\n\n    if (!callbackObject) return console.warn(eventName + \" not found!\");\n\n    for (let id in callbackObject) {\n      callbackObject[id](...args);\n\n      if (id[0] === \"d\") {\n        delete callbackObject[id];\n      }\n    }\n  }\n\n  on(eventName: string, callback: Function): ISubscribe {\n    if (!this._eventObject[eventName]) {\n      this._eventObject[eventName] = {};\n    }\n\n    const id = this._callbackId++;\n\n    this._eventObject[eventName][id] = callback;\n\n    const unSubscribe = () => {\n      delete this._eventObject[eventName][id];\n\n      if (Object.keys(this._eventObject[eventName]).length === 0) {\n        delete this._eventObject[eventName];\n      }\n    };\n\n    return { unSubscribe };\n  }\n\n  off(eventName: string): void {\n    if (!eventName) {\n      this._eventObject = {};\n      return;\n    }\n\n    delete this._eventObject[eventName];\n  }\n}\n\nexport const eventBus = new EventBus();\n","import { store } from \"../store\";\nimport { renderControls } from \"./controls\";\nimport { renderFooter } from \"./footer\";\nimport { renderHeader } from \"./header\";\nimport { renderTimer } from \"./timer\";\n\nexport function render() {\n  renderControls();\n  renderFooter();\n  renderTimer();\n  renderHeader();\n\n  if (store.state.running) {\n    window.requestAnimationFrame(render);\n  }\n}\n","export * from './store';\n","import { BusEvents, DEFAULT_STORE_SETTINGS, DEFAULT_STORE_STATE } from \"../consts\";\nimport { eventBus } from \"../eventBus\";\nimport { StoreSettings, StoreState } from \"../types\";\nimport storage from \"../utils/storage\";\n\nclass Store {\n  private _state: StoreState;\n  private _settings: StoreSettings;\n\n  constructor() {\n    this._init();\n  }\n\n  private _init() {\n    this._loadSettings();\n    this._loadState();\n  }\n\n  private _loadSettings() {\n    const savedSettings = storage.loadSettings();\n    this._settings = {\n      ...DEFAULT_STORE_SETTINGS,\n      ...savedSettings,\n    }\n  }\n\n  private _loadState() {\n    const savedState = storage.loadState();\n    this._state = {\n      ...DEFAULT_STORE_STATE,\n      timeLeft: this._settings.focusPeriod,\n      ...savedState,\n    }\n  }\n\n  startTimer() {\n    this._state.running = true;\n\n    this.state.round = this.state.round || 1;\n\n    this.reduceTimer();\n  }\n\n  stopTimer() {\n    this._state.running = false;\n  }\n\n  reduceTimer() {\n    this.state.round > 0 && (this._state.timeLeft = this._state.timeLeft - 1000);\n\n    if (this._state.timeLeft < 0) {\n      return eventBus.dispatch(BusEvents.NextRound);\n    }\n\n    this._state.running && setTimeout(this.reduceTimer.bind(this), 1000);\n  }\n\n  resetTimer() {\n    this._init();\n  }\n\n  restartTimer() {\n    this._loadState();\n    this.startTimer();\n  }\n\n  startBreak() {\n    this._state.breakRunning = true;\n    this._state.timeLeft = this.state.round === this.settings.rounds\n      ? this.settings.longBreakPeriod\n      : this.settings.shortBreakPeriod;\n    this.reduceTimer();\n  }\n\n  startNextRound() {\n    this._state.breakRunning = false;\n    this._state.round += 1;\n    this._state.timeLeft = this.settings.focusPeriod;\n    this.reduceTimer();\n  }\n\n  get settings() {\n    return this._settings;\n  }\n\n  get state() {\n    return this._state;\n  }\n}\n\nexport const store = new Store();\n","import { StorageKey } from \"../consts\";\nimport { StoreSettings, StoreState } from \"../types\";\n\nexport default {\n  loadSettings: (): StoreSettings | {} => JSON.parse(localStorage.getItem(StorageKey.Settings) || '{}'),\n  saveSettings: (settings: StoreSettings): void => localStorage.setItem(StorageKey.Settings, JSON.stringify(settings)),\n  loadState: (): StoreState | {} => JSON.parse(localStorage.getItem(StorageKey.State) || '{}'),\n  saveState: (state: StoreState): void => localStorage.setItem(StorageKey.State, JSON.stringify(state)),\n}","import { store } from \"../store\";\nimport { EL_BUTTONS, ElementModifier } from \"../consts\";\n\nexport function renderControls() {\n  if (store.state.running) {\n    EL_BUTTONS.START?.classList.add(ElementModifier.Hidden);\n    EL_BUTTONS.STOP?.classList.remove(ElementModifier.Hidden);\n  } else {\n    EL_BUTTONS.START?.classList.remove(ElementModifier.Hidden);\n    EL_BUTTONS.STOP?.classList.add(ElementModifier.Hidden);\n  }\n}\n","import { EL_TEXTS } from \"../consts\";\nimport { LABELS } from '../labels';\nimport { store } from \"../store\";\nimport { leadZero } from '../utils';\n\nexport function renderFooter() {\n  const currentOperation = store.state.breakRunning ? LABELS.RELAX : LABELS.WORK;\n\n  const timeLeftMs = store.state.timeLeft;\n  const timeLeftMinutes = Math.floor(timeLeftMs / 1000 / 60);\n  const timeLeftSeconds = (timeLeftMs - timeLeftMinutes * 60 * 1000) / 1000;\n  const timeLeftString = `${leadZero(timeLeftMinutes)}:${leadZero(timeLeftSeconds)}`;\n\n  EL_TEXTS.TIME_OPERATION && (EL_TEXTS.TIME_OPERATION.innerHTML = currentOperation);\n  EL_TEXTS.TIME_REMAINS && (EL_TEXTS.TIME_REMAINS.innerHTML = timeLeftString);\n};\n","export const LABELS = {\n  MORE: 'ещё',\n  RELAX: 'Отдыхаем',\n  WORK: 'Работаем',\n};\n","export const leadZero = (num: number) => num.toString().padStart(2, '0');","import { EL_TEXTS } from \"../consts\";\nimport { store } from \"../store\";\n\nexport function renderHeader() {\n  EL_TEXTS.HEADER_ROUND_CURRENT && (EL_TEXTS.HEADER_ROUND_CURRENT.innerHTML = store.state.round.toString());\n  EL_TEXTS.HEADER_ROUNDS_TOTAL && (EL_TEXTS.HEADER_ROUNDS_TOTAL.innerHTML = store.settings.rounds.toString());\n};\n","import { EL_TIMER } from \"../consts\";\nimport { store } from \"../store\";\n\nexport function renderTimer() {\n  const isLastRound = store.state.round === store.settings.rounds;\n  const totalPeriod = store.state.breakRunning\n    ? isLastRound\n      ? store.settings.longBreakPeriod\n      : store.settings.shortBreakPeriod\n    : store.settings.focusPeriod;\n  const timerPercentage = 100 - Math.floor(store.state.timeLeft * 100 / totalPeriod);\n\n  EL_TIMER.LOGO_COLORED && (EL_TIMER.LOGO_COLORED.style.height = `${timerPercentage}%`);\n}","import { BusEvents, EL_BUTTONS } from \"../consts\";\nimport { eventBus } from \"../eventBus\";\n\nfunction initStartButton() {\n  EL_BUTTONS.START?.addEventListener('click', () => {\n    eventBus.dispatch(BusEvents.Start);\n  });\n}\n\nfunction initStopButton() {\n  EL_BUTTONS.STOP?.addEventListener('click', () => {\n    eventBus.dispatch(BusEvents.Stop);\n  });\n}\n\nfunction initResetButton() {\n  EL_BUTTONS.RESET?.addEventListener('click', () => {\n    eventBus.dispatch(BusEvents.Reset);\n  });\n}\n\nexport default function initControls() {\n  initStartButton();\n  initStopButton();\n  initResetButton();\n}\n"],"names":["StorageKey","$a91a01484b593c8b$export$2fdc5139b636713c","ButtonId","$a91a01484b593c8b$var$ButtonId","TextId","$a91a01484b593c8b$var$TextId","TimerLogoId","$a91a01484b593c8b$var$TimerLogoId","AudioId","$a91a01484b593c8b$var$AudioId","$a91a01484b593c8b$export$93078a41d8e73977","START","document","getElementById","STOP","SETTINGS","RESET","$a91a01484b593c8b$export$dd1e936c5b2d458","TIME_OPERATION","TIME_REMAINS","HEADER_ROUND_CURRENT","HEADER_ROUNDS_TOTAL","$a91a01484b593c8b$export$b04ded17071220be","LOGO_COLORED","LOGO_COLORLESS","$a91a01484b593c8b$export$2accdc8d96d35d7d","focusPeriod","shortBreakPeriod","longBreakPeriod","rounds","$a91a01484b593c8b$export$63ea91826dd1b82b","round","running","breakRunning","timeLeft","BusEvents","$a91a01484b593c8b$export$a427be93dd43fc51","ElementModifier","$a91a01484b593c8b$export$eb0f4a961a9c335e","$db9724f8cd4502af$export$f6644f0f2c90144b","constructor","_eventObject","_callbackId","dispatch","eventName","args","callbackObject","console","warn","id","on","callback","unSubscribe","Object","keys","length","off","JSON","parse","localStorage","getItem","Settings","State","$b282ec412b377a19$export$6f57813fe9f31bf9","_init","_loadSettings","_loadState","savedSettings","_settings","savedState","_state","startTimer","state","reduceTimer","stopTimer","NextRound","setTimeout","bind","resetTimer","restartTimer","startBreak","settings","startNextRound","$c30515efa72e4213$export$79b91d4669dcadcb","RELAX","WORK","$f1570614bfa62b3d$export$a098d05678a70394","num","toString","padStart","$d35f44120e40e340$export$b3890eb0ae9dca99","classList","add","Hidden","remove","currentOperation","timeLeftMs","timeLeftMinutes","Math","floor","timeLeftString","innerHTML","isLastRound","totalPeriod","timerPercentage","style","height","window","requestAnimationFrame","addEventListener","Start","Stop","Reset"],"version":3,"file":"index.2a43ad99.js.map"}